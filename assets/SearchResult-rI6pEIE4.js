import{l as N,u as X,m as M,n as Z,y as tt,t as et,p as it,q as D,v as k,x as i,z as at,w as lt,A as st,R as T,B as rt,D as nt,E as ot,F as ct,G as mt,H as $,J as z,K as ht,L as ut,M as pt,N as dt,O as ft,Q as vt,S as yt,T as gt,U,V as bt,W as q}from"./app-CbLkK8_H.js";const wt=["/SUMMARY.html","/about-book.html","/beat-ai.html","/community.html","/github.html","/index-list.html","/into-rust.html","/practice.html","/rust-weekly.html","/rustt.html","/rusty-book.html","/some-thoughts.html","/advance/errors.html","/advance/global-variable.html","/advance/hrtb.html","/advance/intro.html","/advance/macro.html","/advance/simd.html","/advance-practice/async.html","/advance-practice/bridging-with-sync.html","/advance-practice/channels.html","/advance-practice/design-pattern.html","/advance-practice/frame.html","/advance-practice/getting-startted.html","/advance-practice/graceful-shutdown.html","/advance-practice/intro.html","/advance-practice/io.html","/advance-practice/overview.html","/advance-practice/select.html","/advance-practice/shared-state.html","/advance-practice/spawning.html","/advance-practice/stream.html","/advance-practice1/graceful-shutdown.html","/advance-practice1/intro.html","/advance-practice1/multi-threads.html","/advance-practice1/web-server.html","/appendix/derive.html","/appendix/difficulties.html","/appendix/expressions.html","/appendix/intro.html","/appendix/keywords.html","/appendix/operators.html","/appendix/prelude.html","/appendix/rust-version.html","/basic/comment.html","/basic/flow-control.html","/basic/formatted-output.html","/basic/intro.html","/basic/lifetime.html","/basic/method.html","/basic/variable.html","/basic-practice/base-features.html","/basic-practice/envs.html","/basic-practice/intro.html","/basic-practice/iterators.html","/basic-practice/refactoring.html","/basic-practice/stderr.html","/basic-practice/tests.html","/cargo/getting-started.html","/cargo/git-auth.html","/cargo/intro.html","/compiler/intro.html","/difficulties/cow.html","/difficulties/eq.html","/difficulties/intro.html","/difficulties/lifetime.html","/difficulties/move-copy.html","/difficulties/pointer.html","/difficulties/slice.html","/difficulties/string.html","/first-try/cargo.html","/first-try/editor.html","/first-try/hello-world.html","/first-try/installation.html","/first-try/intro.html","/first-try/slowly-downloading.html","/first-try/sth-you-should-not-do.html","/libraries/intro.html","/logs/about-log.html","/logs/intro.html","/logs/log.html","/logs/tracing-logger.html","/logs/tracing.html","/practice/best-pratice.html","/practice/interview.html","/practice/intro.html","/practice/naming.html","/practice/third-party-libs.html","/profiling/intro.html","/std/hashmap.html","/std/intro.html","/std/iterator.html","/std/search.html","/std/vector.html","/templates/intro.html","/test/assertion.html","/test/benchmark.html","/test/ci.html","/test/intro.html","/test/unit-integration-test.html","/test/write-tests.html","/too-many-lists/do-we-need-it.html","/too-many-lists/intro.html","/usecases/aws-rust.html","/usecases/intro.html","/advance/async/async-await.html","/advance/async/future-excuting.html","/advance/async/getting-started.html","/advance/async/intro.html","/advance/async/multi-futures-simultaneous.html","/advance/async/pain-points-and-workarounds.html","/advance/async/pin-unpin.html","/advance/async/web-server.html","/advance/circle-self-ref/circle-reference.html","/advance/circle-self-ref/intro.html","/advance/circle-self-ref/self-referential.html","/advance/concurrency-with-threads/concurrency-parallelism.html","/advance/concurrency-with-threads/intro.html","/advance/concurrency-with-threads/message-passing.html","/advance/concurrency-with-threads/races.html","/advance/concurrency-with-threads/ref-counter-lock.html","/advance/concurrency-with-threads/send-sync.html","/advance/concurrency-with-threads/sync1.html","/advance/concurrency-with-threads/sync2.html","/advance/concurrency-with-threads/thread.html","/advance/difficulties/pointer.html","/advance/functional-programing/closure.html","/advance/functional-programing/intro.html","/advance/functional-programing/iterator.html","/advance/into-types/converse.html","/advance/into-types/custom-type.html","/advance/into-types/enum-int.html","/advance/into-types/intro.html","/advance/into-types/sized.html","/advance/lifetime/advance.html","/advance/lifetime/intro.html","/advance/lifetime/misconceptions.html","/advance/lifetime/static.html","/advance/smart-pointer/box.html","/advance/smart-pointer/cell-refcell.html","/advance/smart-pointer/deref.html","/advance/smart-pointer/drop.html","/advance/smart-pointer/intro.html","/advance/smart-pointer/rc-arc.html","/advance/unsafe/inline-asm.html","/advance/unsafe/intro.html","/advance/unsafe/superpowers.html","/advance/unsafe/ub.html","/appendix/rust-versions/1.58.html","/appendix/rust-versions/1.59.html","/appendix/rust-versions/1.60.html","/appendix/rust-versions/1.61.html","/appendix/rust-versions/1.62.html","/appendix/rust-versions/1.63.html","/appendix/rust-versions/1.64.html","/appendix/rust-versions/1.65.html","/appendix/rust-versions/1.66.html","/appendix/rust-versions/1.67.html","/appendix/rust-versions/1.68.html","/appendix/rust-versions/1.69.html","/appendix/rust-versions/1.70.html","/appendix/rust-versions/1.71.html","/appendix/rust-versions/1.72.html","/appendix/rust-versions/1.73.html","/appendix/rust-versions/1.74.html","/appendix/rust-versions/1.75.html","/appendix/rust-versions/1.76.html","/appendix/rust-versions/1.77.html","/appendix/rust-versions/1.78.html","/appendix/rust-versions/1.79.html","/appendix/rust-versions/1.80.html","/appendix/rust-versions/1.81.html","/appendix/rust-versions/1.82.html","/appendix/rust-versions/1.83.html","/appendix/rust-versions/1.84.html","/appendix/rust-versions/1.85.html","/appendix/rust-versions/intro.html","/basic/base-type/char-bool.html","/basic/base-type/function.html","/basic/base-type/","/basic/base-type/numbers.html","/basic/base-type/statement-expression.html","/basic/collections/hashmap.html","/basic/collections/intro.html","/basic/collections/vector.html","/basic/compound-type/array.html","/basic/compound-type/enum.html","/basic/compound-type/intro.html","/basic/compound-type/string-slice.html","/basic/compound-type/struct.html","/basic/compound-type/tuple.html","/basic/crate-module/crate.html","/basic/crate-module/intro.html","/basic/crate-module/module.html","/basic/crate-module/use.html","/basic/match-pattern/all-patterns.html","/basic/match-pattern/intro.html","/basic/match-pattern/match-if-let.html","/basic/match-pattern/option.html","/basic/match-pattern/pattern-match.html","/basic/ownership/borrowing.html","/basic/ownership/","/basic/ownership/ownership.html","/basic/result-error/intro.html","/basic/result-error/panic.html","/basic/result-error/result.html","/basic/trait/advance-trait.html","/basic/trait/generic.html","/basic/trait/intro.html","/basic/trait/trait-object.html","/basic/trait/trait.html","/cargo/guide/build-cache.html","/cargo/guide/cargo-cache.html","/cargo/guide/cargo-toml-lock.html","/cargo/guide/dependencies.html","/cargo/guide/download-package.html","/cargo/guide/intro.html","/cargo/guide/package-layout.html","/cargo/guide/tests-ci.html","/cargo/guide/why-exist.html","/cargo/reference/cargo-target.html","/cargo/reference/configuration.html","/cargo/reference/deps-overriding.html","/cargo/reference/env.html","/cargo/reference/intro.html","/cargo/reference/manifest.html","/cargo/reference/package-id.html","/cargo/reference/profile.html","/cargo/reference/profiles.html","/cargo/reference/publishing-on-crates.io.html","/cargo/reference/specify-deps.html","/cargo/reference/workspaces.html","/compiler/fight-with-compiler/intro.html","/compiler/fight-with-compiler/phantom-data.html","/compiler/fight-with-compiler/unconstrained.html","/compiler/pitfalls/arithmetic-overflow.html","/compiler/pitfalls/closure-with-lifetime.html","/compiler/pitfalls/","/compiler/pitfalls/iterator-everywhere.html","/compiler/pitfalls/lazy-iterators.html","/compiler/pitfalls/main-with-channel-blocked.html","/compiler/pitfalls/multiple-mutable-references.html","/compiler/pitfalls/stack-overflow.html","/compiler/pitfalls/the-disabled-mutability.html","/compiler/pitfalls/use-vec-in-for.html","/compiler/pitfalls/utf8-performance.html","/compiler/pitfalls/weird-ranges.html","/libraries/command/intro.html","/libraries/command/structopt.html","/libraries/http/intro.html","/libraries/http/reqwest.html","/libraries/json/intro.html","/libraries/json/serde.html","/logs/observe/about-observe.html","/logs/observe/intro.html","/logs/observe/trace.html","/profiling/compiler/attributes.html","/profiling/compiler/intro.html","/profiling/compiler/llvm.html","/profiling/compiler/phantom-data.html","/profiling/compiler/speed-up.html","/profiling/memory/allocation.html","/profiling/memory/intro.html","/profiling/memory/layout.html","/profiling/memory/pointer-ref.html","/profiling/memory/uninit.html","/profiling/memory/virtual.html","/profiling/performance/allocator.html","/profiling/performance/calculate.html","/profiling/performance/clone-copy.html","/profiling/performance/cpu-cache.html","/profiling/performance/deep-into-move.html","/profiling/performance/early-optimise.html","/profiling/performance/enum.html","/profiling/performance/heap-stack.html","/profiling/performance/intro.html","/profiling/performance/runtime-check.html","/profiling/performance/string.html","/profiling/performance/tools.html","/templates/files/dir.html","/templates/files/intro.html","/templates/http/intro.html","/too-many-lists/advanced-lists/double-singly.html","/too-many-lists/advanced-lists/intro.html","/too-many-lists/advanced-lists/stack-allocated.html","/too-many-lists/advanced-lists/unsafe-deque.html","/too-many-lists/bad-stack/basic-operations.html","/too-many-lists/bad-stack/final-code.html","/too-many-lists/bad-stack/intro.html","/too-many-lists/bad-stack/layout.html","/too-many-lists/deque/final-code.html","/too-many-lists/deque/intro.html","/too-many-lists/deque/iterator.html","/too-many-lists/deque/layout.html","/too-many-lists/deque/peek.html","/too-many-lists/deque/symmetric.html","/too-many-lists/ok-stack/intro.html","/too-many-lists/ok-stack/iter.html","/too-many-lists/ok-stack/itermut.html","/too-many-lists/ok-stack/peek.html","/too-many-lists/ok-stack/type-optimizing.html","/too-many-lists/persistent-stack/drop-arc.html","/too-many-lists/persistent-stack/intro.html","/too-many-lists/persistent-stack/layout.html","/too-many-lists/production-unsafe-deque/basics.html","/too-many-lists/production-unsafe-deque/boring-combinatorics.html","/too-many-lists/production-unsafe-deque/drop-and-panic-safety.html","/too-many-lists/production-unsafe-deque/filling-in-random-bits.html","/too-many-lists/production-unsafe-deque/final-code.html","/too-many-lists/production-unsafe-deque/implementing-cursors.html","/too-many-lists/production-unsafe-deque/intro.html","/too-many-lists/production-unsafe-deque/layout.html","/too-many-lists/production-unsafe-deque/send-sync-and-compile-tests.html","/too-many-lists/production-unsafe-deque/testing-cursors.html","/too-many-lists/production-unsafe-deque/testing.html","/too-many-lists/production-unsafe-deque/variance-and-phantomData.html","/too-many-lists/unsafe-queue/basics.html","/too-many-lists/unsafe-queue/extra-junk.html","/too-many-lists/unsafe-queue/final-code.html","/too-many-lists/unsafe-queue/intro.html","/too-many-lists/unsafe-queue/layout.html","/too-many-lists/unsafe-queue/layout2.html","/too-many-lists/unsafe-queue/miri.html","/too-many-lists/unsafe-queue/stacked-borrow.html","/too-many-lists/unsafe-queue/testing-stacked-borrow.html","/cargo/reference/build-script/examples.html","/cargo/reference/build-script/intro.html","/cargo/reference/features/examples.html","/cargo/reference/features/intro.html","/compiler/fight-with-compiler/borrowing/borrow-distinct-fields-of-struct.html","/compiler/fight-with-compiler/borrowing/intro.html","/compiler/fight-with-compiler/borrowing/ref-exist-in-out-fn.html","/compiler/fight-with-compiler/lifetime/closure-with-static.html","/compiler/fight-with-compiler/lifetime/intro.html","/compiler/fight-with-compiler/lifetime/loop.html","/compiler/fight-with-compiler/lifetime/too-long1.html","/compiler/fight-with-compiler/lifetime/too-long2.html","/profiling/compiler/optimization/intro.html","/profiling/compiler/optimization/option.html","/profiling/profiling/performance/benchmark.html","/404.html","/","/advance/","/advance-practice/","/advance-practice1/","/appendix/","/basic/","/basic-practice/","/cargo/","/compiler/","/difficulties/","/first-try/","/libraries/","/logs/","/practice/","/profiling/","/std/","/templates/","/test/","/too-many-lists/","/usecases/","/advance/async/","/advance/circle-self-ref/","/advance/concurrency-with-threads/","/advance/difficulties/","/advance/functional-programing/","/advance/into-types/","/advance/lifetime/","/advance/smart-pointer/","/advance/unsafe/","/appendix/rust-versions/","/basic/collections/","/basic/compound-type/","/basic/crate-module/","/basic/match-pattern/","/basic/result-error/","/basic/trait/","/cargo/guide/","/cargo/reference/","/compiler/fight-with-compiler/","/libraries/command/","/libraries/http/","/libraries/json/","/logs/observe/","/profiling/compiler/","/profiling/memory/","/profiling/performance/","/templates/files/","/templates/http/","/too-many-lists/advanced-lists/","/too-many-lists/bad-stack/","/too-many-lists/deque/","/too-many-lists/ok-stack/","/too-many-lists/persistent-stack/","/too-many-lists/production-unsafe-deque/","/too-many-lists/unsafe-queue/","/cargo/reference/build-script/","/cargo/reference/features/","/compiler/fight-with-compiler/borrowing/","/compiler/fight-with-compiler/lifetime/","/profiling/compiler/optimization/","/profiling/profiling/performance/","/profiling/profiling/","/category/","/tag/","/Blog/","/star/","/timeline/"],xt="SLIMSEARCH_QUERY_HISTORY",v=U(xt,[]),kt=()=>{const{queryHistoryCount:l}=q;return{enabled:l>0,queryHistories:v,addQueryHistory:n=>{v.value=Array.from(new Set([n,...v.value.slice(0,l-1)]))},removeQueryHistory:n=>{v.value=[...v.value.slice(0,n),...v.value.slice(n+1)]}}},j=l=>wt[l.id]+("anchor"in l?`#${l.anchor}`:""),qt="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:F}=q,y=U(qt,[]),Ht=()=>({enabled:F>0,resultHistories:y,addResultHistory:r=>{{const n={link:j(r),display:r.display};"header"in r&&(n.header=r.header),y.value=[n,...y.value.slice(0,F-1)]}},removeResultHistory:r=>{y.value=[...y.value.slice(0,r),...y.value.slice(r+1)]}}),Rt=l=>{const r=ht(),n=M(),H=ut(),o=D(0),g=k(()=>o.value>0),h=pt([]);return dt(()=>{const{search:R,terminate:p}=ft(),b=yt(d=>{const{resultsFilter:Q=a=>a,querySplitter:f,suggestionsFilter:A,...s}=r.value;d?(o.value+=1,R(d,n.value,s).then(a=>Q(a,d,n.value,H.value)).then(a=>{o.value-=1,h.value=a}).catch(a=>{console.warn(a),o.value-=1,o.value||(h.value=[])})):h.value=[]},q.searchDelay-q.suggestDelay,{maxWait:5e3});vt([l,n],([d])=>b(d.join(" "))),gt(()=>{p()})}),{isSearching:g,results:h}};var St=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const n=X(),H=M(),o=Z(tt),{addQueryHistory:g,queryHistories:h,removeQueryHistory:R}=kt(),{resultHistories:p,addResultHistory:b,removeResultHistory:d}=Ht(),Q=et(l,"queries"),{results:f,isSearching:A}=Rt(Q),s=it({isQuery:!0,index:0}),a=D(0),u=D(0),E=k(()=>h.value.length>0||p.value.length>0),S=k(()=>f.value.length>0),C=k(()=>f.value[a.value]||null),O=()=>{const{isQuery:t,index:e}=s;e===0?(s.isQuery=!t,s.index=t?p.value.length-1:h.value.length-1):s.index=e-1},P=()=>{const{isQuery:t,index:e}=s;e===(t?h.value.length-1:p.value.length-1)?(s.isQuery=!t,s.index=0):s.index=e+1},Y=()=>{a.value=a.value>0?a.value-1:f.value.length-1,u.value=C.value.contents.length-1},_=()=>{a.value=a.value<f.value.length-1?a.value+1:0,u.value=0},B=()=>{u.value<C.value.contents.length-1?u.value+=1:_()},V=()=>{u.value>0?u.value-=1:Y()},L=t=>t.map(e=>bt(e)?e:i(e[0],e[1])),W=t=>{if(t.type==="customField"){const e=ct[t.index]||"$content",[c,x=""]=mt(e)?e[H.value].split("$content"):e.split("$content");return t.display.map(m=>i("div",L([c,...m,x])))}return t.display.map(e=>i("div",L(e)))},w=()=>{a.value=0,u.value=0,r("updateQuery",""),r("close")},G=()=>i("ul",{class:"slimsearch-result-list"},i("li",{class:"slimsearch-result-list-item"},[i("div",{class:"slimsearch-result-title"},o.value.queryHistory),h.value.map((t,e)=>i("div",{class:["slimsearch-result-item",{active:s.isQuery&&s.index===e}],onClick:()=>{r("updateQuery",t)}},[i($,{class:"slimsearch-result-type"}),i("div",{class:"slimsearch-result-content"},t),i("button",{class:"slimsearch-remove-icon",innerHTML:z,onClick:c=>{c.preventDefault(),c.stopPropagation(),R(e)}})]))])),J=()=>i("ul",{class:"slimsearch-result-list"},i("li",{class:"slimsearch-result-list-item"},[i("div",{class:"slimsearch-result-title"},o.value.resultHistory),p.value.map((t,e)=>i(T,{to:t.link,class:["slimsearch-result-item",{active:!s.isQuery&&s.index===e}],onClick:()=>{w()}},()=>[i($,{class:"slimsearch-result-type"}),i("div",{class:"slimsearch-result-content"},[t.header?i("div",{class:"content-header"},t.header):null,i("div",t.display.map(c=>L(c)).flat())]),i("button",{class:"slimsearch-remove-icon",innerHTML:z,onClick:c=>{c.preventDefault(),c.stopPropagation(),d(e)}})]))]));return at("keydown",t=>{if(l.isFocusing){if(S.value){if(t.key==="ArrowUp")V();else if(t.key==="ArrowDown")B();else if(t.key==="Enter"){const e=C.value.contents[u.value];g(l.queries.join(" ")),b(e),n.push(j(e)),w()}}else if(t.key==="ArrowUp")O();else if(t.key==="ArrowDown")P();else if(t.key==="Enter"){const{index:e}=s;s.isQuery?(r("updateQuery",h.value[e]),t.preventDefault()):(n.push(p.value[e].link),w())}}}),lt([a,u],()=>{var t;(t=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>i("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!S.value:!E.value}],id:"slimsearch-results"},l.queries.length?A.value?i(st,{hint:o.value.searching}):S.value?i("ul",{class:"slimsearch-result-list"},f.value.map(({title:t,contents:e},c)=>{const x=a.value===c;return i("li",{class:["slimsearch-result-list-item",{active:x}]},[i("div",{class:"slimsearch-result-title"},t||o.value.defaultTitle),e.map((m,K)=>{const I=x&&u.value===K;return i(T,{to:j(m),class:["slimsearch-result-item",{active:I,"aria-selected":I}],onClick:()=>{g(l.queries.join(" ")),b(m),w()}},()=>[m.type==="text"?null:i(m.type==="title"?rt:m.type==="heading"?nt:ot,{class:"slimsearch-result-type"}),i("div",{class:"slimsearch-result-content"},[m.type==="text"&&m.header?i("div",{class:"content-header"},m.header):null,i("div",W(m))])])})])})):o.value.emptyResult:E.value?[G(),J()]:o.value.emptyHistory)}});export{St as default};
